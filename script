local MacLib = loadstring(game:HttpGet("https://github.com/biggaboy212/Maclib/releases/latest/download/maclib.txt"))()

-- Create the main window
local Window = MacLib:Window({
    Title = "Night RBX",
    Subtitle = "BETA | V0.1",
    Size = UDim2.fromOffset(868, 650),
    DragStyle = 3, -- Changed to 3 for full top-bar dragging, better for mobile
    DisabledWindowControls = {},
    ShowUserInfo = true,
    Keybind = Enum.KeyCode.RightControl,
    AcrylicBlur = true
})

-- Set config folder
MacLib:SetFolder("NightRBX_Configs")

-- Make the window movable on mobile
Window.Frame.Position = UDim2.new(0.5, -434, 0.5, -325) -- Center the UI initially
Window.Frame.AnchorPoint = Vector2.new(0.5, 0.5) -- Anchor to center for better mobile positioning

-- Create TabGroup
local TabGroup = Window:TabGroup()

-- Combat Tab
local CombatTab = TabGroup:Tab({
    Name = "Combat"
})
CombatTab:Select() -- Make Combat tab active by default

-- Config Tab
local ConfigTab = TabGroup:Tab({
    Name = "Config"
})

-- Combat Tab Sections
local CombatSections = {
    LeftTop = CombatTab:Section({Side = "Left"}),
    LeftBottom = CombatTab:Section({Side = "Left"}),
    RightTop = CombatTab:Section({Side = "Right"}),
    RightBottom = CombatTab:Section({Side = "Right"})
}

-- Config Tab Section
local ConfigSection = ConfigTab:Section({Side = "Left"})

-- Add Config Settings
ConfigSection:Button({
    Name = "Save Config",
    Callback = function()
        MacLib:SaveConfig("config")
        Window:Notify({
            Title = "Config",
            Description = "Settings saved"
        })
    end
})

ConfigSection:Button({
    Name = "Load Config",
    Callback = function()
        MacLib:LoadConfig("config")
        Window:Notify({
            Title = "Config",
            Description = "Settings loaded"
        })
    end
})

ConfigSection:Button({
    Name = "Refresh Config List",
    Callback = function()
        local configList = MacLib:RefreshConfigList()
        Window:Notify({
            Title = "Config List",
            Description = "Configs: " .. table.concat(configList, ", ")
        })
    end
})

ConfigSection:Button({
    Name = "Load Auto Config",
    Callback = function()
        MacLib:LoadAutoLoadConfig()
        Window:Notify({
            Title = "Auto Load",
            Description = "Autoload config applied"
        })
    end
})

-- Combat Sections Example Elements
CombatSections.LeftTop:Button({
    Name = "Attack",
    Callback = function()
        print("Attacking.")
        Window:Notify({
            Title = "Combat",
            Description = "Attack triggered"
        })
    end
})

CombatSections.LeftBottom:Slider({
    Name = "Attack Range",
    Default = 10,
    Minimum = 5,
    Maximum = 20,
    DisplayMethod = "Percent",
    Callback = function(Value)
        print("Attack range set to: " .. Value)
    end
}, "AttackRange")

CombatSections.RightTop:Toggle({
    Name = "Auto Attack",
    Default = false,
    Callback = function(value)
        Window:Notify({
            Title = "Auto Attack",
            Description = value and "Enabled" or "Disabled"
        })
    end
}, "AutoAttack")

CombatSections.RightBottom:Button({
    Name = "Use Skill",
    Callback = function()
        print("Using skill.")
        Window:Notify({
            Title = "Combat",
            Description = "Skill activated"
        })
    end
})

-- Create Toggle Button for Mobile Players
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.Name = "UIToggleGui"
ScreenGui.ResetOnSpawn = false -- Prevent resetting on respawn

local ToggleButton = Instance.new("ImageButton") -- Changed to ImageButton for circle
ToggleButton.Size = UDim2.new(0, 50, 0, 50) -- Circular size
ToggleButton.Position = UDim2.new(0.5, -25, 0, 10) -- Centered at top
ToggleButton.AnchorPoint = Vector2.new(0.5, 0)
ToggleButton.BackgroundTransparency = 1 -- No background
ToggleButton.Image = "rbxassetid://83971645462159" -- Your provided image ID
ToggleButton.Parent = ScreenGui

-- Toggle UI visibility
local uiVisible = true
ToggleButton.MouseButton1Click:Connect(function()
    uiVisible = not uiVisible
    Window.Frame.Visible = uiVisible
    -- Optional: Change image transparency to indicate state
    ToggleButton.ImageTransparency = uiVisible and 0 or 0.5
end)

-- Initial Config Load (optional)
MacLib:LoadConfig("config")
