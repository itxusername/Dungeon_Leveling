local MacLib = loadstring(game:HttpGet("https://github.com/biggaboy212/Maclib/releases/latest/download/maclib.txt"))()

-- Create the main window
local Window = MacLib:Window({
    Title = "Night RBX",
    Subtitle = "BETA | V0.1",
    Size = UDim2.fromOffset(868, 650),
    DragStyle = 1,
    DisabledWindowControls = {},
    ShowUserInfo = true,
    Keybind = Enum.KeyCode.RightControl,
    AcrylicBlur = true
})

-- Set config folder
MacLib:SetFolder("NightRBX_Configs")

-- Create TabGroup
local TabGroup = Window:TabGroup()

-- Combat Tab
local CombatTab = TabGroup:Tab({
    Name = "Combat"
})
CombatTab:Select() -- Make Combat tab active by default

-- Config Tab
local ConfigTab = TabGroup:Tab({
    Name = "Config"
})

-- Combat Tab Sections
local CombatSections = {
    LeftTop = CombatTab:Section({Side = "Left"}),
    LeftBottom = CombatTab:Section({Side = "Left"}),
    RightTop = CombatTab:Section({Side = "Right"}),
    RightBottom = CombatTab:Section({Side = "Right"})
}

-- Config Tab Section
local ConfigSection = ConfigTab:Section({Side = "Left"})

-- Add Config Settings
ConfigSection:Button({
    Name = "Save Config",
    Callback = function()
        MacLib:SaveConfig("settings.txt")
        Window:Notify({
            Title = "Config",
            Description = "Settings saved to settings.txt"
        })
    end
})

ConfigSection:Button({
    Name = "Load Config",
    Callback = function()
        MacLib:LoadConfig("settings.txt")
        Window:Notify({
            Title = "Config",
            Description = "Settings loaded from settings.txt"
        })
    end
})

ConfigSection:Button({
    Name = "Refresh Config List",
    Callback = function()
        local configList = MacLib:RefreshConfigList()
        Window:Notify({
            Title = "Config List",
            Description = "Configs: " .. table.concat(configList, ", ")
        })
    end
})

ConfigSection:Button({
    Name = "Load Auto Config",
    Callback = function()
        MacLib:LoadAutoLoadConfig()
        Window:Notify({
            Title = "Auto Load",
            Description = "Autoload config applied"
        })
    end
})

-- Combat Sections Example Elements
CombatSections.LeftTop:Button({
    Name = "Attack",
    Callback = function()
        print("Attacking.")
        Window:Notify({
            Title = "Combat",
            Description = "Attack triggered"
        })
    end
})

CombatSections.LeftBottom:Slider({
    Name = "Attack Range",
    Default = 10,
    Minimum = 5,
    Maximum = 20,
    DisplayMethod = "Percent",
    Callback = function(Value)
        print("Attack range set to: " .. Value)
    end
}, "AttackRange")

CombatSections.RightTop:Toggle({
    Name = "Auto Attack",
    Default = false,
    Callback = function(value)
        Window:Notify({
            Title = "Auto Attack",
            Description = value and "Enabled" or "Disabled"
        })
    end
}, "AutoAttack")

CombatSections.RightBottom:Button({
    Name = "Use Skill",
    Callback = function()
        print("Using skill.")
        Window:Notify({
            Title = "Combat",
            Description = "Skill activated"
        })
    end
})

-- Create Toggle Button for Mobile Players
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.Name = "UIToggleGui"

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 100, 0, 50)
ToggleButton.Position = UDim2.new(0.5, -50, 0, 10) -- Centered at top
ToggleButton.AnchorPoint = Vector2.new(0.5, 0)
ToggleButton.Text = "Toggle UI"
ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Parent = ScreenGui

-- Toggle UI visibility
local uiVisible = true
ToggleButton.MouseButton1Click:Connect(function()
    uiVisible = not uiVisible
    Window.Frame.Visible = uiVisible -- Assuming 'Frame' is the main UI container (may need adjustment)
    ToggleButton.Text = uiVisible and "Toggle UI" or "Show UI"
end)

-- Initial Config Load (optional)
MacLib:LoadConfig("settings.txt")
